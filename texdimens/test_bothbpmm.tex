% etex this file to check current macros obtain same results as in the past
\input texdimens
\catcode`*\active\catcode`\^^M=\active
\def*{\catcode`*12\relax}% as * may be used in some \numexpr
\def\m#1^^M#2^^M{\catcode`*\active%
                 % things such as \the \numexpr \texdimenbp {803804sp}bp will
                 % have catcode 11 bp, but the \y will be with catcode 12,
                 % so we must detokenize
                 \edef\x{\detokenize\expandafter{\expanded{#1}}}%
                 % a \the\dimexpr gives catcode 12 pt
                 \edef\y{\detokenize{#2}}%
                 \ifx\x\y\else\errmessage{\detokenize{#1} gave \x\space not \y}\fi}%
% **texdimens
% (./texdimens.tex)
% *\let\m\message
%
*\m{\texdimenbothbpmm{1000pt}}
351.45981
*\m{\texdimenpt{351.45981mm}}
1000.0
*\m{\texdimenbp{1000pt}}
996.26402
*\m{\texdimenpt{996.26402bp}}
1000.0
*\m{\texdimenbothbpmm{1001pt}}
351.81126
*\m{\texdimenpt{351.81126mm}}
1001.0
*\m{\texdimenbp{1001pt}}
997.26028
*\m{\texdimenpt{997.26028bp}}
1001.0
*\m{\texdimenbothbpmm{1000pt+1sp}}
351.45981
*\m{\texdimenbothbpmm{1000pt+2sp}}
351.45981
*\m{\texdimenbothbpmm{1000pt+3sp}}
351.45982
*\m{\the\numexpr\dimexpr1000pt+3sp}
65536003
*\m{\the\numexpr\dimexpr351.45982mm}
65536003
*\m{\texdimenbp{1000pt+3sp}}
996.26407
*\m{\the\numexpr\dimexpr996.26407bp}
65536003
*\m{\texdimenbothbpmm{802sp}}
0.00429
*\m{\the\numexpr\dimexpr0.00429mm}
799
*\m{\texdimenbothbpmm{802sp}}
0.00429
*\m{\texdimenbothbpmm{801sp}}
0.00429
*\m{\texdimenbothbpmm{800sp}}
0.00429
*\m{\texdimenbothbpmm{799sp}}
0.00429
*\m{\texdimenbothbpmm{798sp}}
0.00427
*\m{\texdimenbothbpmm{797sp}}
0.00427
*\m{\texdimenbothbpmm{535sp}}
0.00287
*\m{\texdimenbothbpmm{534sp}}
0.00287
*\m{\texdimenbothbpmm{533sp}}
0.00285
*\m{\texdimenbothbpmm{532sp}}
0.00285
*\m{\texdimenbothbpmm{803802sp}}
4.31067
*\m{\the\numexpr\dimexpr4.31067mm}
803801
*\m{\texdimenbothbpmm{803803sp}}
4.31067
*\m{\texdimenbp{4.31067mm}}
12.21922
*\m{\the\numexpr\dimexpr12.21922bp}
803801
*\m{\texdimenbothbpmm{803804sp}}
4.31068
*\m{\the\numexpr\dimexpr4.31068mm}
803804
*\m{\the\numexpr\texdimenbp{803804sp}bp}
12.21925bp
*\m{\the\numexpr\dimexpr\texdimenbp{803804sp}bp}
803804
*\m{\the\numexpr\dimexpr1.2345mm}
230194
*\m{\texdimenbothbpmm{230194sp}}
1.2345
*\m{\the\numexpr\dimexpr\texdimenbp{230194sp}bp}
230194
*\m{\texdimenbothbpmm{230195sp}}
1.2345
*\m{\texdimenbothbpmm{230196sp}}
1.2345
*\m{\texdimenbothbpmm{230197sp}}
1.23451
*\m{\the\numexpr\dimexpr\texdimenbp{230197sp}bp}
230197
*\m{\the\dimexpr2446sp}
0.03732pt
*\m{\texdimenbothbpmm{0.03832mm}}
0.03831
*\m{\texdimenbothbpmm{0.03831mm}}
0.03831
*\m{\texdimenbothbpmm{0.03830mm}}
0.0383
*\m{\the\dimexpr\numexpr1693+2540*30sp}
1.18855pt
*\m{\texdimenbothbpmm{1.18855mm}}
1.18854
*\m{\texdimenbothbpmm{1.18854mm}}
1.18854
*\m{\texdimenbp{1.18854mm}}
3.3691
*\m{\the\dimexpr3.3691bp, \the\dimexpr1.18854mm}
3.38171pt, 3.38171pt
*\m{\the\dimexpr\numexpr1693+2540*30sp}
1.18855pt
*\m{\texdimenbothmmbp{1.18854pt}}
1.1841
*\m{\the\dimexpr1.1841bp}
1.18854pt
*\m{\texdimenbothmmbp{1.18855pt}}
1.1841
*\m{\texdimenbothmmbp{1.18856pt}}
1.1841
*\m{\texdimenbothmmbp{1.18857pt}}
1.1841
*\m{\texdimenbothmmbp{1.18858pt}}
1.18414
*\m{\the\dimexpr1.1841bp,\the\dimexpr1.18414bp}
1.18854pt,1.18858pt
*\m{\texdimenbothbpmm{1.18854pt}}
0.41772
*\m{\the\dimexpr0.41772mm}
1.18854pt
*\m{\texdimenbothbpmm{1.18855pt}}
0.41772
*\m{\texdimenbothbpmm{1.18856pt}}
0.41772
*\m{\texdimenbothbpmm{1.18857pt}}
0.41772
*\m{\texdimenbothbpmm{1.18858pt}}
0.41774
*\m{\the\dimexpr0.41772mm,\the\dimexpr0.41774mm}
1.18854pt,1.18858pt
*\m{\texdimenbothbpmm{1mm}}
1.0
*\m{\texdimenbothmmbp{1bp}}
0.99997
*\m{\texdimenmm{0.99997bp}}
0.35277
*\m{\the\numexpr\dimexpr0.35277mm,\the\numexpr\dimexpr0.99997bp}
65779,65779
*\m{\the\numexpr\dimexpr1bp}
65781
*\m{\texdimenbothbpmmsp{65781sp}}
65779
*\m{\texdimenbothbpmmsp{65782sp}}
65782
\bye
